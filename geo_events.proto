syntax = "proto2";
package raccoonai;

import "google/protobuf/timestamp.proto";

enum GeoEventType {
  GEO_EVENT_TYPE_UNDEFINED = 0;
  GEO_EVENT_TYPE_SERVICE_STARTED = 1;
  GEO_EVENT_TYPE_SERVICE_COMPLETED = 2;
  GEO_EVENT_TYPE_TRUCK_OFFLINE = 3;
  GEO_EVENT_TYPE_TRUCK_ONLINE = 4;
  GEO_EVENT_TYPE_DUMP_STARTED = 5;
  GEO_EVENT_TYPE_DUMP_COMPLETED = 6;
}

message GeoEventPublishPayload {
  required uint64 truck_id = 1;
  required uint64 location_id = 2;
  required google.protobuf.Timestamp datetime = 3;
  required uint64 service_provider_id = 4;
  required GeoEventType event_type = 5;
  optional double duration_minutes = 6;
}

enum GeoLocationType {
  LOCATION_TYPE_UNDEFINED = 0;
  LOCATION_TYPE_DEPOT = 1;
  LOCATION_TYPE_POINT = 2;
}

enum GeoProcessType {
  GEO_PROCESS_TYPE_UNDEFINED = 0;
  GEO_PROCESS_TYPE_DEPOT_PROCESS = 1;
  GEO_PROCESS_TYPE_LOADING_PROCESS = 2;
  GEO_PROCESS_TYPE_UNLOADING_PROCESS = 3;
}

message GeoProcess {
  required uint64 truck_id = 1;
  required uint64 location_id = 2;
  required string location_name = 3;
  required GeoLocationType location_type = 4;
  required uint64 service_provider_id = 5;
  required GeoProcessType process_type = 6;
  required google.protobuf.Timestamp process_start_at = 7;
  optional google.protobuf.Timestamp process_end_at = 8;
  optional google.protobuf.Timestamp last_active_at = 9;

  optional bool is_active = 10;

  optional int32 process_id = 11;
  optional float proximity_score = 12;
  optional int32 start_buffer_id = 13;
  optional int32 end_buffer_id = 14;
  optional float duration_minutes = 15;
}
