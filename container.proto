syntax = "proto2";
package raccoonai;

import "google/protobuf/struct.proto";
import "google/protobuf/timestamp.proto";

option go_package = "./pb";

// *****************************************************
// CONTAINER TYPE
// *****************************************************
message ContainerType {
  required uint64 id = 1 [json_name = "id"];
  required string name = 2 [json_name = "type_name"];
  required uint64 owner_organization_id = 3 [json_name = "owner_organization_id"];
  required float volume = 4 [json_name = "volume"];
  optional float weight_kg = 5 [json_name = "weight_kg"];

  optional google.protobuf.Timestamp created_at = 101 [json_name = "created_at"];
  optional google.protobuf.Timestamp updated_at = 102 [json_name = "updated_at"];
}

message ContainerTypeCreate {
  required string name = 1 [json_name = "name"];
  required uint64 owner_organization_id = 2 [json_name = "owner_organization_id"];
  required float volume = 3 [json_name = "volume"];
  required float weight_kg = 4 [json_name = "weight_kg"];
}

message ContainerTypeUpdate {
  required uint64 id = 1 [json_name = "id"];
  optional string name = 2 [json_name = "name"];
  optional float volume = 3 [json_name = "volume"];
  optional float weight_kg = 4 [json_name = "weight_kg"];
}

message ContainerTypeList {
  repeated ContainerType container_types = 1 [json_name = "container_types"];
}

// *****************************************************
// CONTAINER GROUP
// *****************************************************
message ContainerGroup {
  required uint64 id = 1 [json_name = "id"];
  required uint64 owner_organization_id = 2 [json_name = "owner_organization_id"];
  required ContainerType container_type = 3 [json_name = "container_type"];
  required uint32 number_of_containers = 4 [json_name = "number_of_containers"];
  required uint64 pickup_location_id = 5 [json_name = "pickup_location_id"];
  optional google.protobuf.Struct service_schedule_by_job_type = 6 [json_name = "service_schedule_by_job_type"];

  optional google.protobuf.Timestamp created_at = 101 [json_name = "created_at"];
  optional google.protobuf.Timestamp updated_at = 102 [json_name = "updated_at"];
}

message ContainerGroupCreate {
  required uint64 owner_organization_id = 1 [json_name = "owner_organization_id"];
  required uint64 container_type_id = 2 [json_name = "container_type_id"];
  required uint32 number_of_containers = 3 [json_name = "number_of_containers"];
  required uint64 pickup_location_id = 4 [json_name = "pickup_location_id"];
  optional google.protobuf.Struct service_schedule_by_job_type = 5 [json_name = "service_schedule_by_job_type"];
}

message ContainerGroupUpdate {
  required uint64 id = 1 [json_name = "id"];
  optional uint64 container_type_id = 2 [json_name = "container_type_id"];
  optional uint32 number_of_containers = 3 [json_name = "number_of_containers"];
  optional uint64 pickup_location_id = 4 [json_name = "pickup_location_id"];
  optional google.protobuf.Struct service_schedule_by_job_type = 5 [json_name = "service_schedule_by_job_type"];
}

message ContainerGroupList {
  repeated ContainerGroup container_groups = 1 [json_name = "container_groups"];
}

// *****************************************************
// CONTAINER
// *****************************************************
enum ContainerStatus {
  CONTAINER_STATUS_UNDEFINED = 0;
  CONTAINER_STATUS_INACTIVE = 1;
  CONTAINER_STATUS_ACTIVE = 2;
}

enum ContainerTrackingEvent {
  CONTAINER_TRACKING_EVENT_UNDEFINED = 0;
  CONTAINER_TRACKING_EVENT_DELIVERED = 1;
  CONTAINER_TRACKING_EVENT_COLLECTED = 2;
}

message Container {
  required uint64 id = 1 [json_name = "id"];
  required string name = 2 [json_name = "name"];
  required uint64 type_id = 3 [json_name = "type_id"];
  required ContainerType type = 4 [json_name = "type"];
  required ContainerStatus status = 5 [json_name = "status"];
  required uint64 owner_organization_id = 6 [json_name = "owner_organization_id"];
  required bool is_tracked = 7 [json_name = "is_tracked"];
  optional uint64 pickup_location_id = 8 [json_name = "pickup_location_id"];
  optional ContainerTrackingEvent last_event = 9 [json_name = "last_event"];
  optional google.protobuf.Timestamp last_event_at = 10 [json_name = "last_event_at"];

  required google.protobuf.Timestamp created_at = 101 [json_name = "created_at"];
  required google.protobuf.Timestamp updated_at = 102 [json_name = "updated_at"];
}

message ContainerCreate {
  required string name = 1 [json_name = "name"];
  required uint64 type_id = 2 [json_name = "type_id"];
  required uint64 owner_organization_id = 3 [json_name = "owner_organization_id"];
  optional uint64 pickup_location_id = 4 [json_name = "pickup_location_id"];
  required bool is_tracked = 5 [json_name = "is_tracked"];
  optional ContainerTrackingEvent last_event = 6 [json_name = "last_event"];
  optional google.protobuf.Timestamp last_event_at = 7 [json_name = "last_event_at"];
}

message ContainerUpdate {
  required uint64 id = 1 [json_name = "id"];
  optional string name = 2 [json_name = "name"];
  optional uint64 type_id = 3 [json_name = "type_id"];
  optional ContainerStatus status = 4 [json_name = "status"];
  optional bool is_tracked = 5 [json_name = "is_tracked"];
  optional uint64 pickup_location_id = 6 [json_name = "pickup_location_id"];
  optional ContainerTrackingEvent last_event = 7 [json_name = "last_event"];
  optional google.protobuf.Timestamp last_event_at = 8 [json_name = "last_event_at"];
}

message ContainerStatusUpdate {
  required string name = 1 [json_name = "name"];
  required uint64 pickup_location_id = 2 [json_name = "pickup_location_id"];
  required ContainerTrackingEvent last_event = 3 [json_name = "last_event"];
}
