syntax = "proto2";

package raccoonai;

import "organization.proto";
import "truck.proto";

option go_package = "./pb";

message SearchTruckRequest {
  required string plate_number = 1 [json_name = "plate_number"];
}

message SearchTruckResult {
  optional bool is_guest = 2 [json_name = "is_guest"];
  optional Truck truck = 3 [json_name = "truck"];
  optional Organization org = 4 [json_name = "org"];
}

message SearchTruckResponse {
  repeated SearchTruckResult results = 1 [json_name = "results"];
}

message TruckListRequest {
  optional uint64 owner_organization_id = 1 [json_name = "owner_organization_id"]; // filter by org
  optional TruckType type = 2 [json_name = "type"]; // filter by truck type
}

message TruckListResponse {
  repeated Truck trucks = 1 [json_name = "trucks"];
}

message CreateGuestTruckRequest {
  required uint64 owner_organization_id = 1 [json_name = "owner_organization_id"];
  required string plate_number = 2 [json_name = "plate_number"];
  required TruckType type = 3 [json_name = "type"];
}

message TruckWeightRequest {
  required uint64 id = 1 [json_name = "id"];
  required double truck_weight = 2 [json_name = "truck_weight"];
}

message TruckRequest {
  required uint64 truck_id = 1 [json_name = "truck_id"];
}

service TruckService {
  rpc SearchTruck(SearchTruckRequest) returns (SearchTruckResponse) {}
  rpc TruckList(TruckListRequest) returns (TruckListResponse) {}
  rpc CreateGuestTruck(CreateGuestTruckRequest) returns (Truck) {}
  rpc UpdateTruckWeight(TruckWeightRequest) returns (Truck) {}
}
