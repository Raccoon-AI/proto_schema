syntax = "proto2";
package raccoonai;

import "google/protobuf/timestamp.proto";

option go_package = "./pb";

// TODO: DEPRECATE AFTER MIGRATION *********

enum FileUploadType {
  FILE_UPLOAD_TYPE_UNDEFINED = 0;
  FILE_UPLOAD_TYPE_JOB_SERVICE_STARTED = 1;
  FILE_UPLOAD_TYPE_JOB_SERVICE_ENDED = 2;
  FILE_UPLOAD_TYPE_PICKUP_LOCATION_VIEW = 3;
  FILE_UPLOAD_TYPE_CONTRACT_DOCUMENT = 4;
}

message FileUpload {
  required uint64 id = 1 [json_name = "id"];
  required uint64 owner_organization_id = 2 [json_name = "owner_organization_id"];
  required string url = 3 [json_name = "url"];
  required FileUploadType type = 4 [json_name = "type"];
  optional float lat = 5 [json_name = "lat"];
  optional float lon = 6 [json_name = "lon"];
  optional uint64 job_id = 7 [json_name = "job_id"];
  optional uint64 contract_id = 8 [json_name = "contract_id"];
  required google.protobuf.Timestamp created_at = 9 [json_name = "created_at"];
  optional uint64 author_id = 10 [json_name = "author_id"];
}

message FileUploadCreate {
  required uint64 owner_organization_id = 1 [json_name = "owner_organization_id"];
  required FileUploadType type = 2 [json_name = "type"];
  optional float lat = 3 [json_name = "lat"];
  optional float lon = 4 [json_name = "lon"];
  optional uint64 job_id = 5 [json_name = "job_id"];
  optional uint64 contract_id = 6 [json_name = "contract_id"];
  optional uint64 author_id = 7 [json_name = "author_id"];
}

message File {
  optional string bytes = 1 [json_name = "bytes"]; // base64-encoded image data
  optional string name = 2 [json_name = "name"];
  optional string format = 3 [json_name = "format"]; // e.g., jpg, png
  optional double lat = 4 [json_name = "lat"];
  optional double lon = 5 [json_name = "lon"];
  optional google.protobuf.Timestamp ts = 6 [json_name = "ts"];
}
