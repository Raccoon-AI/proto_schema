syntax = "proto2";
package raccoonai;

import "google/protobuf/timestamp.proto";

option go_package = "./pb";

enum UserRole {
  USER_ROLE_UNDEFINED = 0;
  USER_ROLE_ADMIN = 1;
  USER_ROLE_RECEIVER_USER = 2;
  USER_ROLE_DRIVER = 3;
  USER_ROLE_PROVIDER_DISPATCHER = 4;
  USER_ROLE_SUPPORT = 6;
  USER_ROLE_PROVIDER_OWNER = 7;
  USER_ROLE_DISPOSAL_SITE_OWNER = 8;
  USER_ROLE_GOVERNMENT_AUDITOR = 9;
  USER_ROLE_PROVIDER_MECHANIC = 10;
  USER_ROLE_GPS_INNER_SERVICE = 11;
  USER_ROLE_PROVIDER_OWNER_VIEW_ONLY = 12;
  USER_ROLE_PROVIDER_SALES = 13;
}

enum UserStatus {
  USER_STATUS_UNDEFINED = 0;
  USER_STATUS_INACTIVE = 1;
  USER_STATUS_ACTIVE = 2;
  USER_STATUS_GUEST = 3;
}

// GET => /v1/platform/me/
message User {
  required uint64 id = 1 [json_name = "id"];
  required google.protobuf.Timestamp created_at = 2 [json_name = "created_at"];
  required UserRole role = 3 [json_name = "role"];
  optional uint64 owner_organization_id = 4 [json_name = "owner_organization_id"];
  optional string first_name = 5 [json_name = "first_name"];
  optional string last_name = 6 [json_name = "last_name"];
  optional string phone_number = 7 [json_name = "phone_number"];
  optional string email = 8 [json_name = "email"];
  required UserStatus status = 9 [json_name = "status"];
  optional string driver_license_number = 10 [json_name = "driver_license_number"];
  optional string fcm_token = 14 [json_name = "fcm_token"];
}

message UserCreate {
  required UserRole role = 1 [json_name = "role"];
  optional uint64 owner_organization_id = 2 [json_name = "owner_organization_id"];
  optional string first_name = 3 [json_name = "first_name"];
  optional string last_name = 4 [json_name = "last_name"];
  optional string phone_number = 5 [json_name = "phone_number"];
  optional string email = 6 [json_name = "email"];
  required string password = 7 [json_name = "password"];
  optional uint64 telegram_user_id = 8 [json_name = "telegram_user_id"];
  optional string telegram_username = 9 [json_name = "telegram_username"];
  optional uint64 telegram_chat_id = 10 [json_name = "telegram_chat_id"];
  optional string driver_license_number = 11 [json_name = "driver_license_number"];
  optional string fcm_token = 12 [json_name = "fcm_token"];
  optional string registration_token = 13 [json_name = "registration_token"];
}

message UserUpdate {
  required uint64 id = 1 [json_name = "id"];
  optional string first_name = 2 [json_name = "first_name"];
  optional string last_name = 3 [json_name = "last_name"];
  optional string phone_number = 4 [json_name = "phone_number"];
  optional string email = 5 [json_name = "email"];
  optional UserStatus status = 6 [json_name = "status"];
  optional string driver_license_number = 7 [json_name = "driver_license_number"];
  optional string fcm_token = 8 [json_name = "fcm_token"];
}

message UserUpdateRole {
  required uint64 id = 1 [json_name = "id"];
  required UserRole role = 2 [json_name = "role"];
}

message RegistrationTokenCreate {
  required string token = 1 [json_name = "token"];
  required uint64 owner_organization_id = 2 [json_name = "owner_organization_id"];
  required UserRole role = 3 [json_name = "role"];
  required google.protobuf.Timestamp expires_at = 4 [json_name = "expires_at"];
  required uint64 created_by_user_id = 5 [json_name = "created_by_user_id"];
  optional bool is_used = 6 [json_name = "is_used"];
}

message RegistrationTokenUpdate {
  required uint64 id = 1 [json_name = "id"];
  required bool is_used = 2 [json_name = "is_used"];
}

message GenerateLink {
  required UserRole role = 1 [json_name = "role"];
  required int32 owner_organization_id = 2 [json_name = "owner_organization_id"];
  required string preferred_method = 3 [json_name = "preferred_method"];
  required string recipient = 4 [json_name = "recipient"];
  required string lang = 5 [json_name = "lang"];
}

message PasswordUpdate {
  required uint64 id = 1 [json_name = "id"];
  required string old_pwd = 2 [json_name = "old_pwd"];
  required string new_pwd = 3 [json_name = "new_pwd"];
}
